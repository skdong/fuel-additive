{
    "rule_to_pick_boot_disk": [
        {
            "regex": "^nvme", 
            "type": "exclude_disks_by_name", 
            "description": "NVMe drives should be skipped as accessing such drives during the boot typically requires using UEFI which is still not supported by fuel-agent (it always installs BIOS variant of  grub). grub bug (http://savannah.gnu.org/bugs/?41883)"
        }, 
        {
            "regex": "^md", 
            "root_mount": "/", 
            "type": "pick_root_disk_if_disk_name_match", 
            "description": "If we have /root on fake raid, then /boot partition should land on to it too. We can't proceed with grub-install otherwise."
        }
    ], 
    "volumes_roles_mapping": {
        "compute": [
            {
                "id": "os", 
                "allocate_size": "min"
            }, 
            {
                "id": "vm", 
                "allocate_size": "all"
            }
        ], 
        "mongo": [
            {
                "id": "os", 
                "allocate_size": "min"
            }, 
            {
                "id": "mongo", 
                "allocate_size": "all"
            }
        ], 
        "virt": [
            {
                "id": "os", 
                "allocate_size": "min"
            }, 
            {
                "id": "vm", 
                "allocate_size": "all"
            }
        ], 
        "base-os": [
            {
                "id": "os", 
                "allocate_size": "min"
            }
        ], 
        "controller": [
            {
                "id": "os", 
                "allocate_size": "min"
            }, 
            {
                "id": "logs", 
                "allocate_size": "min"
            }, 
            {
                "id": "image", 
                "allocate_size": "all"
            }, 
            {
                "id": "mysql", 
                "allocate_size": "min"
            }, 
            {
                "id": "horizon", 
                "allocate_size": "min"
            }
        ], 
        "other": [
            {
                "id": "os", 
                "allocate_size": "all"
            }
        ], 
        "ceph-osd": [
            {
                "id": "os", 
                "allocate_size": "min"
            }, 
            {
                "id": "cephjournal", 
                "allocate_size": "min"
            }, 
            {
                "id": "ceph", 
                "allocate_size": "full-disk"
            }
        ], 
        "ironic": [
            {
                "id": "os", 
                "allocate_size": "min"
            }, 
            {
                "id": "logs", 
                "allocate_size": "min"
            }
        ], 
        "cinder-block-device": [
            {
                "id": "os", 
                "allocate_size": "min"
            }, 
            {
                "id": "cinder-block-device", 
                "allocate_size": "full-disk"
            }
        ], 
        "cinder": [
            {
                "id": "os", 
                "allocate_size": "min"
            }, 
            {
                "id": "cinder", 
                "allocate_size": "all"
            }
        ]
    }, 
    "volumes": [
        {
            "min_size": {
                "generator": "calc_min_os_size"
            }, 
            "type": "vg", 
            "id": "os", 
            "volumes": [
                {
                    "mount": "/", 
                    "type": "lv", 
                    "name": "root", 
                    "file_system": "ext4", 
                    "size": {
                        "generator": "calc_total_root_vg"
                    }
                }, 
                {
                    "mount": "swap", 
                    "type": "lv", 
                    "name": "swap", 
                    "file_system": "swap", 
                    "size": {
                        "generator": "calc_swap_size"
                    }
                }
            ], 
            "label": "Base System"
        }, 
        {
            "min_size": {
                "generator_args": [
                    10
                ], 
                "generator": "calc_gb_to_mb"
            }, 
            "type": "vg", 
            "id": "logs", 
            "volumes": [
                {
                    "mount": "/var/log", 
                    "type": "lv", 
                    "name": "log", 
                    "file_system": "ext4", 
                    "size": {
                        "generator_args": [
                            "logs"
                        ], 
                        "generator": "calc_total_vg"
                    }
                }
            ], 
            "label": "Logs"
        }, 
        {
            "min_size": {
                "generator": "calc_min_mongo_size"
            }, 
            "type": "vg", 
            "id": "mongo", 
            "volumes": [
                {
                    "mount": "/var/lib/mongo", 
                    "type": "lv", 
                    "name": "mongodb", 
                    "file_system": "ext4", 
                    "size": {
                        "generator_args": [
                            "mongo"
                        ], 
                        "generator": "calc_total_vg"
                    }
                }
            ], 
            "label": "MongoDB"
        }, 
        {
            "partition_guid": "4fbd7e29-9d25-41b8-afd0-062c0ceff05d", 
            "name": "Ceph", 
            "mount": "none", 
            "label": "Ceph", 
            "min_size": {
                "generator": "calc_min_ceph_size"
            }, 
            "type": "partition", 
            "id": "ceph", 
            "file_system": "none"
        }, 
        {
            "partition_guid": "45b0969e-9b03-4f30-b4c6-b4b80ceff106", 
            "name": "Ceph Journal", 
            "mount": "none", 
            "label": "Ceph Journal", 
            "min_size": {
                "generator": "calc_min_ceph_journal_size"
            }, 
            "type": "partition", 
            "id": "cephjournal", 
            "file_system": "none"
        }, 
        {
            "min_size": {
                "generator": "calc_min_mysql_size"
            }, 
            "type": "vg", 
            "id": "mysql", 
            "volumes": [
                {
                    "mount": "/var/lib/mysql", 
                    "type": "lv", 
                    "name": "root", 
                    "file_system": "ext4", 
                    "size": {
                        "generator_args": [
                            "mysql"
                        ], 
                        "generator": "calc_total_vg"
                    }
                }
            ], 
            "label": "Mysql Database"
        }, 
        {
            "min_size": {
                "generator": "calc_min_vm_size"
            }, 
            "type": "vg", 
            "id": "vm", 
            "volumes": [
                {
                    "mount": "/var/lib/nova", 
                    "type": "lv", 
                    "name": "nova", 
                    "file_system": "xfs", 
                    "size": {
                        "generator_args": [
                            "vm"
                        ], 
                        "generator": "calc_total_vg"
                    }
                }
            ], 
            "label": "Virtual Storage"
        }, 
        {
            "min_size": {
                "generator": "calc_min_glance_size"
            }, 
            "type": "vg", 
            "id": "image", 
            "volumes": [
                {
                    "mount": "/var/lib/glance", 
                    "type": "lv", 
                    "name": "glance", 
                    "file_system": "xfs", 
                    "size": {
                        "generator_args": [
                            "image"
                        ], 
                        "generator": "calc_total_vg"
                    }
                }
            ], 
            "label": "Image Storage"
        }, 
        {
            "min_size": {
                "generator_args": [
                    11
                ], 
                "generator": "calc_gb_to_mb"
            }, 
            "type": "vg", 
            "id": "horizon", 
            "volumes": [
                {
                    "mount": "/var/lib/horizon", 
                    "type": "lv", 
                    "name": "horizontmp", 
                    "file_system": "xfs", 
                    "size": {
                        "generator_args": [
                            "horizon"
                        ], 
                        "generator": "calc_total_vg"
                    }
                }
            ], 
            "label": "Horizon Temp Storage"
        }, 
        {
            "min_size": {
                "generator": "calc_min_cinder_size"
            }, 
            "type": "vg", 
            "id": "cinder", 
            "volumes": [], 
            "label": "Cinder"
        }, 
        {
            "mount": "none", 
            "label": "Cinder Block Device", 
            "min_size": {
                "generator": "calc_min_cinder_size"
            }, 
            "volumes": [], 
            "type": "vg", 
            "id": "cinder-block-device"
        }
    ]
}