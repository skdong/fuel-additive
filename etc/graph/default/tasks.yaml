- {id: deploy_start, task_name: deploy_start, type: stage, version: 1.0.0}

- id: deploy_end
  requires: [deploy_end]
  task_name: deploy_end
  type: stage
  version: 1.0.0

- id: steam_start
  requires: deploy_start
  task_name: steam_start
  type: stage
  version: 1.0.0

- id: steam_end
  requires: [steam_start]
  task_name: steam_end
  type: stage
  version: 1.0.0

- id: kubespray_start
  requires: steam_end
  task_name: kubespray_start
  type: stage
  version: 1.0.0

- id: kubespary_end
  requires: [kubespary_start]
  task_name: kubespary_end
  type: stage
  version: 1.0.0

- id: steam
  type: master_shell
  version: 2.1.0
  role: ['/.*/']
  requires: [steam_start]
  required_for: [steam_end]
  parameters:
    strategy:
      type: one_by_one
    cmd: ansible-playbook -i /usr/sbin/steam_inventory.py /user/share/additive/playbook/steam.yml
    timeout: 180

- id: kubespray
  type: master_shell
  version: 2.1.0
  role: ['/.*/']
  requires: [kubespray_start]
  required_for: [kubespray_end]
  parameters:
    strategy:
      type: one_by_one
    cmd: ansible-playbook -i /usr/sbin/kubespray_inventory.py /usr/usr/share/kubespray/playbooks/cluster.yml
    timeout: 180